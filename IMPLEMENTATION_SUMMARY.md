# –°–æ–∑–¥–∞–Ω–∏–µ —É–¥–æ–±–Ω–æ–π C++ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ MksServoDriver

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è main.cpp
- **–£–±—Ä–∞–Ω –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª** –∏–∑ `servo_setup()`, –∫–æ—Ç–æ—Ä—ã–π –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
- **–°–æ–∑–¥–∞–Ω–∞ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è** `servo_test_cycle()` –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
- **–õ–∞–∫–æ–Ω–∏—á–Ω—ã–π main()**: –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –≤—ã–∑–æ–≤—ã –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–∞—à–∏–Ω–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏–π**: –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–æ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–µ–∂–∏–º–∞—Ö

### 2. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ C++ API
–î–æ–±–∞–≤–ª–µ–Ω—ã –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏–µ–º:
- `moveByAngle(degrees, speed)` - –ø–æ–≤–æ—Ä–æ—Ç –Ω–∞ —É–≥–æ–ª –≤ –≥—Ä–∞–¥—É—Å–∞—Ö
- `moveToPosition(revolutions, speed)` - –¥–≤–∏–∂–µ–Ω–∏–µ –∫ –∞–±—Å–æ–ª—é—Ç–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ –≤ –æ–±–æ—Ä–æ—Ç–∞—Ö  
- `rotateRevolutions(revolutions, speed)` - –ø–æ–≤–æ—Ä–æ—Ç –Ω–∞ N –æ–±–æ—Ä–æ—Ç–æ–≤ –æ—Ç —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏
- `setSpeed(rpm, clockwise)` - –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ –≤ –æ–±/–º–∏–Ω
- `stopAndHold()` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —É–¥–µ—Ä–∂–∞–Ω–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏

#### –ß—Ç–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
- `getCurrentRevolutions()` - —Ç–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ –æ–±–æ—Ä–æ—Ç–∞—Ö
- `getCurrentDegrees()` - —Ç–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ –≥—Ä–∞–¥—É—Å–∞—Ö  
- `getCurrentRPM()` - —Ç–µ–∫—É—â–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –≤ –æ–±/–º–∏–Ω
- `isMoving()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è
- `hasError()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫

### 3. –£–¥–æ–±–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
- **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã**: `STEPS_PER_REVOLUTION`, `DEGREES_PER_STEP`
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è** –º–µ–∂–¥—É –µ–¥–∏–Ω–∏—Ü–∞–º–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è
- **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞–º–∏** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ header —Ñ–∞–π–ª–µ
- **–ü—Ä–∏–º–µ—Ä—ã –≤ main.cpp** –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –≤ `README.md` —Å API reference –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ:
```cpp
// –ú–Ω–æ–≥–æ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ –∫–æ–¥–∞ –≤ main.cpp
uint8_t tx[4];
tx[0] = 0xFA; tx[1] = 1; tx[2] = 0x31; tx[3] = CRC;
HAL_GPIO_WritePin(GPIOB, RS485_DERE_Pin, GPIO_PIN_SET);
HAL_UART_Transmit(&huart3, tx, 4, 100);
// ... –º–Ω–æ–≥–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ –æ—Ç–≤–µ—Ç–∞ ...
```

### –ü–æ—Å–ª–µ:
```cpp
// –õ–∞–∫–æ–Ω–∏—á–Ω—ã–π –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫–æ–¥
servo.moveByAngle(90.0f, 150);        // –ø–æ–≤–æ—Ä–æ—Ç –Ω–∞ 90¬∞
float pos = servo.getCurrentDegrees(); // –ø–æ–ª—É—á–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é
servo.setSpeed(30.0f, true);          // –≤—Ä–∞—â–µ–Ω–∏–µ 30 RPM
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```
MksServo/
‚îú‚îÄ‚îÄ MksServo_arduino.h/c      # –ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è C-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞
‚îú‚îÄ‚îÄ MksServoDriver.h/cpp      # –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π C++ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  
‚îî‚îÄ‚îÄ README.md                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã
```

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**: –º–µ—Ç–æ–¥—ã —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
2. **–ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è —Ä–∞–±–æ—Ç–∞**: –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
3. **–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è**: –≤—Å—è —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–∫—Ä—ã—Ç–∞ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞
4. **–ì–∏–±–∫–æ—Å—Ç—å**: –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ, —Ç–∞–∫ –∏ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã
5. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã
6. **–û—Ç–ª–∞–¥–∫–∞**: –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–µ–∂–∏–º–∞—Ö

- **Initial**: –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∏ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
- **Manual**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ –∫–Ω–æ–ø–∫–∞–º/–∫–æ–º–∞–Ω–¥–∞–º
- **GiroScope**: —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –ø–æ –¥–∞–Ω–Ω—ã–º –≥–∏—Ä–æ—Å–∫–æ–ø–∞
- **Scan**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **BindMode/Calibrate**: —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª main.cpp —Ç–µ–ø–µ—Ä—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ª–∞–∫–æ–Ω–∏—á–µ–Ω –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –≤—ã–∑–æ–≤—ã!
